"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=require("tslib"),replaceAll_1=tslib_1.__importDefault(require("../../helpers/replaceAll")),Event_1=require("../../structures/Event"),querys_1=require("../../helpers/querys"),__1=require("../..");exports.default=new Event_1.Event("interactionCreate",(e=>tslib_1.__awaiter(void 0,void 0,void 0,(function*(){var l,r;if(!e.isButton())return;if(!e.customId.startsWith("rct-"))return;const t=e.customId.split("rct-")[1],i=yield(0,querys_1.guilds)().get(e.guildId);if(!(null===(l=null==i?void 0:i.rolesConfig)||void 0===l?void 0:l.length))return;const o=null===(r=i.rolesConfig.find((e=>e.role===t)))||void 0===r?void 0:r.role,s=e.guild.roles.cache.get(o);if(!s)return;let d=null;const n=yield e.guild.members.fetch(e.user.id);return yield e.deferReply({ephemeral:!0}),n.roles.cache.has(s.id)?(yield n.roles.remove(s.id),d=(0,replaceAll_1.default)(__1.client.messages.Embeds.ReactionRoleRemovedEmbed,{"{role}":s.toString(),"{role-name}":s.name})):(yield n.roles.add(s.id),d=(0,replaceAll_1.default)(__1.client.messages.Embeds.ReactionRoleAddedEmbed,{"{role}":s.toString(),"{role-name}":s.name})),e.followUp({embeds:[d]})}))));