"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=require("tslib"),Command_1=require("../../structures/Command"),discord_js_1=require("discord.js"),symbols=["ğŸ’","ğŸŠ","ğŸ‡","ğŸ“","ğŸ‰","ğŸ‹","ğŸ","ğŸ"],winningCombinations=[{symbols:["ğŸ’","ğŸ’","ğŸ’"],payout:3.5},{symbols:["ğŸŠ","ğŸŠ","ğŸŠ"],payout:3},{symbols:["ğŸ‡","ğŸ‡","ğŸ‡"],payout:2}];function generateRandomReels(e){const n=[];for(let o=0;o<e;o++){const e=symbols[Math.floor(Math.random()*symbols.length)];n.push(e)}return n}function checkWinningCombinations(e){for(const n of winningCombinations){const{symbols:o,payout:t}=n;if(e[0]===o[0]&&e[1]===o[1]&&e[2]===o[2])return{payout:t}}return null}function generateSlotAnimation(e,n){const o=[];for(let t=0;t<n;t++){let s="";for(let o=0;o<3;o++){s+=e[(t+o)%n],o<2&&(s+=" : ")}o.push(s)}return o}exports.default=new Command_1.Command({name:"slots",description:"Play a game of slots",run:({client:e,interaction:n})=>tslib_1.__awaiter(void 0,void 0,void 0,(function*(){const o=Math.floor(7*Math.random())+4,t=generateRandomReels(o),s=generateSlotAnimation(generateRandomReels(o),o),i=generateSlotAnimation(t,o),l=generateSlotAnimation(generateRandomReels(o),o),r=(new discord_js_1.EmbedBuilder).setTitle("Slots Machine").setDescription((0,discord_js_1.codeBlock)(`${s[0]}\n${i[0]} <\n${l[0]}`)).setColor(e.config.GeneralSettings.EmbedColor).addFields({name:"Result",value:"ğŸ”„ Spinning...",inline:!0});yield n.reply({embeds:[r]});let a=1;const d=setInterval((()=>{if(a++,a===i.length){clearInterval(d);const e=checkWinningCombinations(t);r.setDescription((0,discord_js_1.codeBlock)(`${s[a-1]}\n${i[a-1]} <\n${l[a-1]}`)),r.setFields({name:"Result",value:e?"ğŸ‰ You won!":"âŒ You lost!",inline:!0}),n.editReply({embeds:[r]})}else r.setDescription((0,discord_js_1.codeBlock)(`${s[a]}\n${i[a]} <\n${l[a]}`)),n.editReply({embeds:[r]})}),1e3)}))});