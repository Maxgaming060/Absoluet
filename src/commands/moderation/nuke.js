"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=require("tslib"),discord_js_1=require("discord.js"),messageUtils_1=require("../../helpers/messageUtils"),Command_1=require("../../structures/Command"),replaceAll_1=tslib_1.__importDefault(require("../../helpers/replaceAll"));exports.default=new Command_1.Command({name:"nuke",description:"Delete all the messages in a channel",options:[{name:"channel",description:"The channel to nuke",type:discord_js_1.ApplicationCommandOptionType.Channel,channelTypes:[discord_js_1.ChannelType.GuildText]}],run:({client:e,interaction:s})=>tslib_1.__awaiter(void 0,void 0,void 0,(function*(){const n=s.options.getChannel("channel",!1,[discord_js_1.ChannelType.GuildText])||s.channel;if(!(yield(0,messageUtils_1.confirmAction)({message:(0,replaceAll_1.default)(e.messages.Embeds.NukeConfirmEmbed),interaction:s})))return s.editReply({embeds:[(0,replaceAll_1.default)(e.messages.Embeds.NukeCancelEmbed)],components:[]});const l=yield n.clone();yield l.setPosition(n.position),yield n.delete(),yield l.send({embeds:[(0,replaceAll_1.default)(e.messages.Embeds.NukeSuccessEmbed,{"{user-tag}":s.user.tag})]})}))});