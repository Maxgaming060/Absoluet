"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=require("tslib"),discord_js_1=require("discord.js"),replaceAll_1=tslib_1.__importDefault(require("../../helpers/replaceAll")),TicketModel_1=tslib_1.__importDefault(require("../../models/TicketModel")),Command_1=require("../../structures/Command");exports.default=new Command_1.Command({name:"remove",description:"Remove a user from a ticket",options:[{name:"user",description:"The user to remove from the ticket",type:discord_js_1.ApplicationCommandOptionType.User,required:!0}],run:({interaction:e,client:s})=>tslib_1.__awaiter(void 0,void 0,void 0,(function*(){if(e.channel.type!==discord_js_1.ChannelType.GuildText)return;const i=e.options.getUser("user"),r=yield TicketModel_1.default.findOne({guildId:e.guildId,channelId:e.channelId});return r?r.usersInTicket.includes(i.id)?(yield e.channel.permissionOverwrites.delete(i.id),r.usersInTicket.splice(r.usersInTicket.indexOf(i.id),1),yield r.save(),e.reply({embeds:[(0,replaceAll_1.default)(s.messages.Embeds.TicketUserRemoved,{"{user}":i.toString(),"{user-id}":i.id,"{user-tag}":i.tag})]})):e.reply({embeds:[(0,replaceAll_1.default)(s.messages.Embeds.TicketUserIsNotAdded,{"{user}":i.toString(),"{user-id}":i.id,"{user-tag}":i.tag})]}):e.reply({embeds:[(0,replaceAll_1.default)(s.messages.Embeds.ChannelIsNotATicketEmbed)]})}))});