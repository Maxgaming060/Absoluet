"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=require("tslib"),TicketModel_1=tslib_1.__importDefault(require("../../models/TicketModel")),Command_1=require("../../structures/Command"),replaceAll_1=tslib_1.__importDefault(require("../../helpers/replaceAll"));exports.default=new Command_1.Command({name:"alert",description:"Alert a user about their ticket",run:({interaction:e,client:l})=>tslib_1.__awaiter(void 0,void 0,void 0,(function*(){const t=yield TicketModel_1.default.findOne({guildId:e.guildId,channelId:e.channelId});if(!t)return e.reply({embeds:[(0,replaceAll_1.default)(l.messages.Embeds.ChannelIsNotATicketEmbed)]});const r=yield e.guild.members.fetch(t.ownerId);try{yield r.send({embeds:[(0,replaceAll_1.default)(l.messages.Embeds.TicketAlertUserEmbed,{"{user-tag}":r.user.tag,"{user-id}":r.id,"{user-pfp}":r.user.displayAvatarURL(),"{channel-name}":e.channel.name,"{channel-url}":e.channel.url})]}),yield e.reply({embeds:[(0,replaceAll_1.default)(l.messages.Embeds.TicketAlertCorrectEmbed,{"{user-tag}":r.user.tag})]})}catch(t){yield e.reply({embeds:[(0,replaceAll_1.default)(l.messages.Embeds.TicketAlertWrongEmbed)]})}}))});