"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=require("tslib"),discord_js_1=require("discord.js"),querys_1=require("../../helpers/querys"),Command_1=require("../../structures/Command"),replaceAll_1=tslib_1.__importDefault(require("../../helpers/replaceAll"));exports.default=new Command_1.Command({name:"rob",description:"Attemp to rob another user's cash",options:[{name:"user",description:"The user to rob",type:discord_js_1.ApplicationCommandOptionType.User,required:!0}],run:({interaction:e,client:r})=>tslib_1.__awaiter(void 0,void 0,void 0,(function*(){var s,o;const i=e.options.getUser("user");if(e.user.id===i.id||i.bot)throw e.reply({embeds:[(0,replaceAll_1.default)(r.messages.Embeds.RobtInvalidUserEmbed)]}),new Error("exclude");const a=yield(0,querys_1.users)().economy().get({guildId:e.guildId,userId:i.id});if(!a||a.balance.money<1)throw e.reply({embeds:[(0,replaceAll_1.default)(r.messages.Embeds.RobVictimInsufficientEmbed)]}),new Error("exclude");const d=yield(0,querys_1.guilds)().get(e.guildId),t=yield(0,querys_1.users)().economy().get({userId:e.user.id,guildId:e.guildId}),l=Math.floor(a.balance.money*(.5*Math.random()+.5));return Math.floor(100*Math.random())<50?(a.balance.money-=l,t.balance.money+=l,yield a.save(),yield t.save(),e.reply({embeds:[(0,replaceAll_1.default)(r.messages.Embeds.RobSuccessEmbed,{"{coin}":(null===(s=null==d?void 0:d.economyConfig)||void 0===s?void 0:s.coin)||"ðŸª™","{user-avatar}":e.user.displayAvatarURL(),"{user-tag}":e.user.tag,"{victim-tag}":i.tag,"{amount}":l})]})):(t.balance.money-=l,yield t.save(),e.reply({embeds:[(0,replaceAll_1.default)(r.messages.Embeds.RobWrongEmbed,{"{coin}":(null===(o=null==d?void 0:d.economyConfig)||void 0===o?void 0:o.coin)||"ðŸª™","{user-avatar}":e.user.displayAvatarURL(),"{user-tag}":e.user.tag,"{victim-tag}":i.tag,"{amount}":l})]}))}))});