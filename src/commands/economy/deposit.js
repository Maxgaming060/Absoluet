"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=require("tslib"),discord_js_1=require("discord.js"),querys_1=require("../../helpers/querys"),Command_1=require("../../structures/Command"),replaceAll_1=tslib_1.__importDefault(require("../../helpers/replaceAll"));exports.default=new Command_1.Command({name:"deposit",description:"Deposit money into your bank account",options:[{name:"amount",description:"The amount of money to deposit",type:discord_js_1.ApplicationCommandOptionType.Number,minValue:1}],run:({interaction:e,client:o})=>tslib_1.__awaiter(void 0,void 0,void 0,(function*(){var r;const s=yield(0,querys_1.users)().economy().get({userId:e.user.id,guildId:e.guildId}),t=e.options.getNumber("amount")||s.balance.money;if(!t||t<=0)return e.reply({embeds:[(0,replaceAll_1.default)(o.messages.Embeds.DepositIncorrectEmbed,{"{amount}":t})]});if(t>s.balance.money)return e.reply({embeds:[(0,replaceAll_1.default)(o.messages.Embeds.DepositInsufficientEmbed,{"{amount}":t})]});s.balance.money-=t,s.balance.bank+=t,yield s.save();const i=yield(0,querys_1.guilds)().get(e.guildId);return e.reply({embeds:[(0,replaceAll_1.default)(o.messages.Embeds.DepositCorrectEmbed,{"{user-tag}":e.user.tag,"{user-avatar}":e.user.displayAvatarURL(),"{amount}":t,"{coin}":null===(r=null==i?void 0:i.economyConfig)||void 0===r?void 0:r.coin})]})}))});