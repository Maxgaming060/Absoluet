"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=require("tslib"),querys_1=require("../../helpers/querys"),Command_1=require("../../structures/Command"),replaceAll_1=tslib_1.__importDefault(require("../../helpers/replaceAll"));exports.default=new Command_1.Command({name:"daily",description:"Claim your daily salary",run:({interaction:e,client:l})=>tslib_1.__awaiter(void 0,void 0,void 0,(function*(){var i,a,d;const r=new Date,s=yield(0,querys_1.guilds)().get(e.guildId),t=yield(0,querys_1.users)().economy().get({userId:e.user.id,guildId:e.guildId}),o=new Date(t.dailyReward);return r<o?e.reply({embeds:[(0,replaceAll_1.default)(l.messages.Embeds.DailyMustWaitEmbed,{"{time}":Math.floor(o.getTime()/1e3)})]}):(t.dailyReward=r.setDate(r.getDate()+1),t.balance.bank+=(null===(i=null==s?void 0:s.economyConfig)||void 0===i?void 0:i.dailyReward)||2500,yield t.save(),e.reply({embeds:[(0,replaceAll_1.default)(l.messages.Embeds.DailyClaimedEmbed,{"{user-tag}":e.user.tag,"{user-avatar}":e.user.displayAvatarURL(),"{amount}":(null===(a=null==s?void 0:s.economyConfig)||void 0===a?void 0:a.dailyReward)||2500,"{coin}":null===(d=null==s?void 0:s.economyConfig)||void 0===d?void 0:d.coin})]}))}))});