"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.userHaveMoney=exports.generateInterfaceEmbed=exports.confirmAction=exports.approve=void 0;const tslib_1=require("tslib"),discord_js_1=require("discord.js"),__1=require(".."),parseStyle_1=tslib_1.__importDefault(require("./parseStyle")),replaceAll_1=tslib_1.__importDefault(require("./replaceAll"));function confirmAction({interaction:e,message:t}){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return new Promise((s=>tslib_1.__awaiter(this,void 0,void 0,(function*(){(yield e.reply({embeds:[t],components:[(new discord_js_1.ActionRowBuilder).addComponents((new discord_js_1.ButtonBuilder).setLabel("Yes").setStyle(discord_js_1.ButtonStyle.Success).setCustomId("yes"),(new discord_js_1.ButtonBuilder).setLabel("No").setStyle(discord_js_1.ButtonStyle.Danger).setCustomId("no"))]})).createMessageComponentCollector({componentType:discord_js_1.ComponentType.Button,filter:t=>t.user.id===e.user.id,time:12e4,max:1}).on("collect",(e=>s("yes"===e.customId)))}))))}))}function approve({interaction:e,user:t,author:s,game:o}){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return new Promise((n=>tslib_1.__awaiter(this,void 0,void 0,(function*(){const i=yield e.reply({content:`${t.toString()}`,components:generateApproveComponents(),embeds:[(0,replaceAll_1.default)(__1.client.messages.Embeds.GameInvitedEmbed,{"{user-name}":s.username,"{game}":o})]}),r=i.createMessageComponentCollector({componentType:discord_js_1.ComponentType.Button,filter:e=>e.user.id===t.id,time:12e4,max:1});r.on("collect",(e=>n("yes"===e.customId?e:null))),r.on("end",((e,t)=>{"time"===t&&i.edit({components:generateApproveComponents(!0),embeds:[(0,replaceAll_1.default)(__1.client.messages.Embeds.GameInvitedTimeoutEmbed)]})}))}))))}))}function generateApproveComponents(e=!1){return[(new discord_js_1.ActionRowBuilder).addComponents((new discord_js_1.ButtonBuilder).setStyle((0,parseStyle_1.default)(__1.client.messages.Buttons.GameAccept.Style)).setLabel(__1.client.messages.Buttons.GameAccept.Label).setDisabled(e).setCustomId("yes"),(new discord_js_1.ButtonBuilder).setStyle((0,parseStyle_1.default)(__1.client.messages.Buttons.GameCancel.Style)).setLabel(__1.client.messages.Buttons.GameCancel.Label).setDisabled(e).setCustomId("no"))]}function userHaveMoney({interaction:e,amount:t,user:s,from:o}){const n=s.balance[o]>=t;return n||e.reply({embeds:[(new discord_js_1.EmbedBuilder).setTitle("You don't have enough money for this.").setColor(__1.client.config.GeneralSettings.EmbedColor)]}),n}function generateInterfaceEmbed(e){return{embeds:[(0,replaceAll_1.default)(e.messages.Embeds.TemporalVoiceInterfaceEmbed)],components:[(new discord_js_1.ActionRowBuilder).addComponents((new discord_js_1.ButtonBuilder).setEmoji(e.messages.Buttons.TempLock.Emoji).setStyle((0,parseStyle_1.default)(e.messages.Buttons.TempLock.Style)).setCustomId("vc>lock"),(new discord_js_1.ButtonBuilder).setEmoji(e.messages.Buttons.TempUnLock.Emoji).setStyle((0,parseStyle_1.default)(e.messages.Buttons.TempUnLock.Style)).setCustomId("vc>unlock"),(new discord_js_1.ButtonBuilder).setEmoji(e.messages.Buttons.TempHide.Emoji).setStyle((0,parseStyle_1.default)(e.messages.Buttons.TempHide.Style)).setCustomId("vc>hide"),(new discord_js_1.ButtonBuilder).setEmoji(e.messages.Buttons.TempUnHide.Emoji).setStyle((0,parseStyle_1.default)(e.messages.Buttons.TempUnHide.Style)).setCustomId("vc>unhide"),(new discord_js_1.ButtonBuilder).setEmoji(e.messages.Buttons.TempLimit.Emoji).setStyle((0,parseStyle_1.default)(e.messages.Buttons.TempLimit.Style)).setCustomId("vc>limit")),(new discord_js_1.ActionRowBuilder).addComponents((new discord_js_1.ButtonBuilder).setEmoji(e.messages.Buttons.TempRename.Emoji).setStyle((0,parseStyle_1.default)(e.messages.Buttons.TempRename.Style)).setCustomId("vc>rename"),(new discord_js_1.ButtonBuilder).setEmoji(e.messages.Buttons.TempInvite.Emoji).setStyle((0,parseStyle_1.default)(e.messages.Buttons.TempInvite.Style)).setCustomId("vc>invite"),(new discord_js_1.ButtonBuilder).setEmoji(e.messages.Buttons.TempKick.Emoji).setStyle((0,parseStyle_1.default)(e.messages.Buttons.TempKick.Style)).setCustomId("vc>kick"),(new discord_js_1.ButtonBuilder).setEmoji(e.messages.Buttons.TempPermit.Emoji).setStyle((0,parseStyle_1.default)(e.messages.Buttons.TempPermit.Style)).setCustomId("vc>permit"),(new discord_js_1.ButtonBuilder).setEmoji(e.messages.Buttons.TempBan.Emoji).setStyle((0,parseStyle_1.default)(e.messages.Buttons.TempBan.Style)).setCustomId("vc>ban"))]}}exports.confirmAction=confirmAction,exports.approve=approve,exports.userHaveMoney=userHaveMoney,exports.generateInterfaceEmbed=generateInterfaceEmbed;