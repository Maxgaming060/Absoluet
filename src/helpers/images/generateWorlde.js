"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tslib_1=require("tslib"),canvas_1=require("@napi-rs/canvas");var WordleColor;!function(o){o.Empty="#31373d",o.Correct="#79b851",o.WrongPosition="#f3c237",o.Wrong="#a4aec4"}(WordleColor||(WordleColor={}));const CANVAS_WIDTH=320,CANVAS_HEIGHT=385,CORNER_RADIUS=5,BOX_SIZE=60,MARGIN=5;function generateWordleImage(o,R){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const e=(0,canvas_1.createCanvas)(320,385),r=e.getContext("2d");drawEmptyBoard(r),drawUserGuesses(r,o,R);return yield e.encode("png")}))}function drawEmptyBoard(o){o.fillStyle=WordleColor.Empty;for(let R=0;R<6;R++)for(let e=0;e<5;e++){const r=e*(BOX_SIZE+MARGIN),_=R*(BOX_SIZE+MARGIN);o.beginPath(),o.moveTo(r+CORNER_RADIUS,_),o.lineTo(r+BOX_SIZE-CORNER_RADIUS,_),o.arcTo(r+BOX_SIZE,_,r+BOX_SIZE,_+CORNER_RADIUS,CORNER_RADIUS),o.lineTo(r+BOX_SIZE,_+BOX_SIZE-CORNER_RADIUS),o.arcTo(r+BOX_SIZE,_+BOX_SIZE,r+BOX_SIZE-CORNER_RADIUS,_+BOX_SIZE,CORNER_RADIUS),o.lineTo(r+CORNER_RADIUS,_+BOX_SIZE),o.arcTo(r,_+BOX_SIZE,r,_+BOX_SIZE-CORNER_RADIUS,CORNER_RADIUS),o.lineTo(r,_+CORNER_RADIUS),o.arcTo(r,_,r+CORNER_RADIUS,_,CORNER_RADIUS),o.closePath(),o.fill()}}function drawUserGuesses(o,R,e){for(let r=0;r<R.length;r++){const _=R[r],I=r%5*(BOX_SIZE+MARGIN),E=Math.floor(r/5)*(BOX_SIZE+MARGIN);_===e[r%5]?drawWord(o,_,I,E,WordleColor.Correct):e.includes(_)?drawWord(o,_,I,E,WordleColor.WrongPosition):drawWord(o,_,I,E,WordleColor.Wrong)}}function drawWord(o,R,e,r,_){o.fillStyle=_,o.beginPath(),o.moveTo(e+CORNER_RADIUS,r),o.lineTo(e+BOX_SIZE-CORNER_RADIUS,r),o.arcTo(e+BOX_SIZE,r,e+BOX_SIZE,r+CORNER_RADIUS,CORNER_RADIUS),o.lineTo(e+BOX_SIZE,r+BOX_SIZE-CORNER_RADIUS),o.arcTo(e+BOX_SIZE,r+BOX_SIZE,e+BOX_SIZE-CORNER_RADIUS,r+BOX_SIZE,CORNER_RADIUS),o.lineTo(e+CORNER_RADIUS,r+BOX_SIZE),o.arcTo(e,r+BOX_SIZE,e,r+BOX_SIZE-CORNER_RADIUS,CORNER_RADIUS),o.lineTo(e,r+CORNER_RADIUS),o.arcTo(e,r,e+CORNER_RADIUS,r,CORNER_RADIUS),o.closePath(),o.fill(),o.font="bold 30px Poppins",o.fillStyle="#ffffff",o.textAlign="center",o.textBaseline="middle",o.fillText(R.toUpperCase(),e+BOX_SIZE/2,r+BOX_SIZE/2)}exports.default=generateWordleImage;